# è®¾ç½®é¡µé¢è¯¦ç»†è®¾è®¡

## 1. é€šç”¨è®¾ç½®

### å­˜å‚¨ä½ç½®é€‰æ‹©
| å­—æ®µ | ç±»å‹ | é»˜è®¤å€¼ | éªŒè¯è§„åˆ™ | è¯´æ˜ |
|------|------|--------|----------|------|
| å­˜å‚¨ä½ç½® | Radio | localStorage | å¿…é€‰ | localStorage / IndexedDB / è‡ªå®šä¹‰è·¯å¾„ |
| è‡ªå®šä¹‰è·¯å¾„ | Input | "" | è·¯å¾„æ ¼å¼ï¼ˆä»…å½“é€‰æ‹©è‡ªå®šä¹‰æ—¶æ˜¾ç¤ºï¼‰ | ç›¸å¯¹æˆ–ç»å¯¹è·¯å¾„ |

### ä¸»é¢˜è®¾ç½®
| å­—æ®µ | ç±»å‹ | é»˜è®¤å€¼ | éªŒè¯è§„åˆ™ | è¯´æ˜ |
|------|------|--------|----------|------|
| ä¸»é¢˜ | Select | system | å¿…é€‰ | light / dark / systemï¼ˆè·Ÿéšç³»ç»Ÿï¼‰ |
| é¢„è§ˆ | - | - | - | å®æ—¶é¢„è§ˆä¸»é¢˜æ•ˆæœ |

### è¯­è¨€è®¾ç½®
| å­—æ®µ | ç±»å‹ | é»˜è®¤å€¼ | éªŒè¯è§„åˆ™ | è¯´æ˜ |
|------|------|--------|----------|------|
| è¯­è¨€ | Select | zh | å¿…é€‰ | ä¸­æ–‡ / English / æ—¥æœ¬èª |

---

## 2. API é…ç½®

### API Key
| å­—æ®µ | ç±»å‹ | é»˜è®¤å€¼ | éªŒè¯è§„åˆ™ | è¯´æ˜ |
|------|------|--------|----------|------|
| API Key | Password | "" | æ­£åˆ™ï¼š`^sk-[a-zA-Z0-9]{32,}$` | æ”¯æŒæ˜¾ç¤º/éšè—åˆ‡æ¢ |
| çŠ¶æ€å¾½ç«  | Badge | - | - | å·²é…ç½® / æœªé…ç½® / è¿‡æœŸ |

### API ç«¯ç‚¹
| å­—æ®µ | ç±»å‹ | é»˜è®¤å€¼ | éªŒè¯è§„åˆ™ | è¯´æ˜ |
|------|------|--------|----------|------|
| ç«¯ç‚¹ URL | Input | https://api.openai.com/v1 | URL æ ¼å¼ | æ”¯æŒè‡ªå®šä¹‰ä»£ç†ç«¯ç‚¹ |
| æµ‹è¯•è¿æ¥ | Button | - | - | ç‚¹å‡»åéªŒè¯è¿é€šæ€§ |

### ç¯å¢ƒå˜é‡çŠ¶æ€
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| OPENAI_API_KEY | Status | âœ… å·²åŠ è½½ / âŒ æœªè®¾ç½® |
| OPENAI_BASE_URL | Status | âœ… å·²åŠ è½½ / âš ï¸ ä½¿ç”¨é»˜è®¤ |
| OMNI_MODEL | Status | âœ… å·²åŠ è½½ / âš ï¸ ä½¿ç”¨é»˜è®¤ |

---

## 3. æ¨¡å‹é…ç½®

### é»˜è®¤æ¨¡å‹
| å­—æ®µ | ç±»å‹ | é»˜è®¤å€¼ | éªŒè¯è§„åˆ™ | è¯´æ˜ |
|------|------|--------|----------|------|
| æ¨¡å‹ | Select | gpt-4o | å¿…é€‰ | gpt-4o / gpt-4o-mini / o1 / o3-mini |

### æ¨¡å‹å‚æ•°
| å­—æ®µ | ç±»å‹ | é»˜è®¤å€¼ | èŒƒå›´ | æ­¥é•¿ | è¯´æ˜ |
|------|------|--------|------|------|------|
| æ¸©åº¦ (Temperature) | Slider | 0.7 | 0 - 2 | 0.1 | æ§åˆ¶éšæœºæ€§ï¼Œå€¼è¶Šé«˜è¶Šéšæœº |
| Top-P | Slider | 0.9 | 0 - 1 | 0.05 | æ ¸é‡‡æ ·æ¦‚ç‡ |
| Max Tokens | Number | 4096 | 1 - 128000 | 1 | æœ€å¤§ç”Ÿæˆé•¿åº¦ |

### å‚æ•°è¯´æ˜å¡ç‰‡
> ğŸ’¡ **æç¤º**ï¼š
> - **æ¸©åº¦ 0-0.3**ï¼šé€‚åˆéœ€è¦ç²¾ç¡®ç­”æ¡ˆçš„ä»»åŠ¡ï¼ˆä»£ç ç”Ÿæˆã€æ•°æ®æå–ï¼‰
> - **æ¸©åº¦ 0.7-1.0**ï¼šé€‚åˆåˆ›æ„ä»»åŠ¡ï¼ˆå†™ä½œã€å¤´è„‘é£æš´ï¼‰
> - **æ¸©åº¦ 1.0-2.0**ï¼šé«˜éšæœºæ€§ï¼Œé€‚åˆå®éªŒæ€§æ¢ç´¢

---

## 4. é«˜çº§è®¾ç½®

### è¯·æ±‚é…ç½®
| å­—æ®µ | ç±»å‹ | é»˜è®¤å€¼ | éªŒè¯è§„åˆ™ | è¯´æ˜ |
|------|------|--------|----------|------|
| è¶…æ—¶æ—¶é—´ | Number | 120 | 10 - 600 | ç§’ï¼Œè¯·æ±‚è¶…æ—¶æ—¶é—´ |
| é‡è¯•æ¬¡æ•° | Number | 3 | 0 - 10 | å¤±è´¥åè‡ªåŠ¨é‡è¯• |
| é‡è¯•å»¶è¿Ÿ | Number | 1000 | 100 - 10000 | æ¯«ç§’ï¼Œé‡è¯•é—´éš” |

### ä»£ç†è®¾ç½®
| å­—æ®µ | ç±»å‹ | é»˜è®¤å€¼ | éªŒè¯è§„åˆ™ | è¯´æ˜ |
|------|------|--------|----------|------|
| å¯ç”¨ä»£ç† | Switch | false | - | å¼€å…³æ§åˆ¶ä¸‹æ–¹è¡¨å•æ˜¾ç¤º |
| ä»£ç†ç±»å‹ | Select | http | - | http / https / socks5 |
| Host | Input | "" | Hostname æˆ– IP | ä»£ç†æœåŠ¡å™¨åœ°å€ |
| Port | Number | 8080 | 1 - 65535 | ç«¯å£å· |
| ç”¨æˆ·å | Input | "" | - | å¯é€‰ï¼Œä»£ç†è®¤è¯ |
| å¯†ç  | Password | "" | - | å¯é€‰ï¼Œä»£ç†è®¤è¯ |

---

## 5. æ•°æ®ç®¡ç†

### å¯¼å…¥é…ç½®
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| é…ç½®æ–‡ä»¶ | File Input | æ¥å— .json æ ¼å¼é…ç½®æ–‡ä»¶ |
| å¯¼å…¥æŒ‰é’® | Button | è§£æå¹¶åº”ç”¨é…ç½®ï¼Œå†²çªæ—¶æç¤ºç”¨æˆ· |

### å¯¼å‡ºé…ç½®
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| å¯¼å‡ºèŒƒå›´ | Checkbox Group | é€‰æ‹©è¦å¯¼å‡ºçš„é…ç½®é¡¹ï¼ˆå…¨éƒ¨ / API / æ¨¡å‹ / é«˜çº§ï¼‰ |
| å¯¼å‡ºæŒ‰é’® | Button | ç”Ÿæˆ .json æ–‡ä»¶å¹¶ä¸‹è½½ |

### å±é™©æ“ä½œåŒº
> âš ï¸ **å±é™©æ“ä½œ**ï¼šä»¥ä¸‹æ“ä½œä¸å¯é€†ï¼Œè¯·è°¨æ…æ“ä½œ

| æ“ä½œ | ç±»å‹ | ç¡®è®¤æ–¹å¼ | è¯´æ˜ |
|------|------|----------|------|
| æ¸…é™¤é…ç½® | Button | è¾“å…¥ "CLEAR" | æ¸…é™¤æ‰€æœ‰ç”¨æˆ·é…ç½®ï¼Œæ¢å¤é»˜è®¤å€¼ |
| æ¸…é™¤ç¼“å­˜ | Button | äºŒæ¬¡ç¡®è®¤å¼¹çª— | æ¸…é™¤æœ¬åœ°å­˜å‚¨çš„ç¼“å­˜æ•°æ® |
| é‡ç½®å…¨éƒ¨ | Button | è¾“å…¥ "RESET ALL" | æ¸…é™¤æ‰€æœ‰æ•°æ®å’Œé…ç½®ï¼Œå®Œå…¨é‡ç½® |

---

## äº¤äº’è§„èŒƒ

### è¡¨å•éªŒè¯
- **å®æ—¶éªŒè¯**ï¼šå¤±ç„¦æ—¶è§¦å‘éªŒè¯ï¼Œæ˜¾ç¤ºé”™è¯¯æç¤º
- **æäº¤éªŒè¯**ï¼šä¿å­˜æ—¶æ£€æŸ¥æ‰€æœ‰å¿…å¡«é¡¹
- **é”™è¯¯æç¤º**ï¼šçº¢è‰²æ–‡å­— + å›¾æ ‡ï¼Œæ˜¾ç¤ºåœ¨å­—æ®µä¸‹æ–¹

### çŠ¶æ€åé¦ˆ
- **æœªä¿å­˜æç¤º**ï¼šé¡µé¢é¡¶éƒ¨æ˜¾ç¤ºé»„è‰²æ¨ªå¹…ï¼š"æ‚¨æœ‰æœªä¿å­˜çš„æ›´æ”¹"
- **ä¿å­˜æˆåŠŸ**ï¼šç»¿è‰² Toast æç¤ºï¼Œ2 ç§’åè‡ªåŠ¨æ¶ˆå¤±
- **ä¿å­˜å¤±è´¥**ï¼šçº¢è‰² Toast æç¤ºï¼Œæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯

### åŠ è½½çŠ¶æ€
- **ä¿å­˜ä¸­**ï¼šæŒ‰é’®æ˜¾ç¤º Spinnerï¼Œæ–‡å­—å˜ä¸º"ä¿å­˜ä¸­..."
- **æµ‹è¯•è¿æ¥**ï¼šæŒ‰é’®æ˜¾ç¤º Spinnerï¼Œå®Œæˆåæ˜¾ç¤º âœ…/âŒ å›¾æ ‡

### å¯¼èˆªåŒæ­¥
- URL Hash åŒæ­¥ï¼š`/settings#api` â†’ è‡ªåŠ¨å±•å¼€ API é…ç½®
- æµè§ˆå™¨å‰è¿›/åé€€ï¼šæ­£ç¡®åˆ‡æ¢å¯¼èˆªé¡¹
- é¡µé¢åˆ·æ–°ï¼šä¿æŒå½“å‰å¯¼èˆªçŠ¶æ€

---

## è§†è§‰è§„èŒƒ

### é¢œè‰²æ–¹æ¡ˆ
```css
/* ä¸»è‰²è°ƒ */
--primary: #6366f1;        /* Indigo-500 */
--primary-hover: #4f46e5;  /* Indigo-600 */

/* è¯­ä¹‰è‰² */
--success: #10b981;        /* Green-500 */
--warning: #f59e0b;        /* Amber-500 */
--error: #ef4444;          /* Red-500 */
--info: #3b82f6;           /* Blue-500 */

/* èƒŒæ™¯è‰² */
--bg-primary: #ffffff;
--bg-secondary: #f9fafb;
--bg-tertiary: #f3f4f6;

/* è¾¹æ¡†è‰² */
--border: #e5e7eb;
--border-focus: #6366f1;

/* æ–‡æœ¬è‰² */
--text-primary: #111827;
--text-secondary: #6b7280;
--text-tertiary: #9ca3af;
```

### é—´è·è§„èŒƒ
```css
--spacing-xs: 0.25rem;   /* 4px */
--spacing-sm: 0.5rem;    /* 8px */
--spacing-md: 1rem;      /* 16px */
--spacing-lg: 1.5rem;    /* 24px */
--spacing-xl: 2rem;      /* 32px */
```

### åœ†è§’è§„èŒƒ
```css
--radius-sm: 0.25rem;   /* 4px */
--radius-md: 0.5rem;    /* 8px */
--radius-lg: 0.75rem;   /* 12px */
```

### å­—ä½“è§„èŒƒ
```css
--font-sans: Inter, -apple-system, sans-serif;
--font-mono: JetBrains Mono, Monaco, monospace;

--text-xs: 0.75rem;    /* 12px */
--text-sm: 0.875rem;   /* 14px */
--text-base: 1rem;     /* 16px */
--text-lg: 1.125rem;   /* 18px */
--text-xl: 1.25rem;    /* 20px */
```

---

## ç»„ä»¶ç»“æ„

```
SettingsPage/
â”œâ”€â”€ SettingsLayout.tsx          # ä¸»å¸ƒå±€å®¹å™¨
â”‚   â”œâ”€â”€ SettingsSidebar.tsx     # å·¦ä¾§å¯¼èˆª
â”‚   â””â”€â”€ SettingsContent.tsx     # å³ä¾§å†…å®¹åŒº
â”œâ”€â”€ sections/
â”‚   â”œâ”€â”€ GeneralSettings.tsx     # é€šç”¨è®¾ç½®
â”‚   â”œâ”€â”€ ApiSettings.tsx         # API é…ç½®
â”‚   â”œâ”€â”€ ModelSettings.tsx       # æ¨¡å‹é…ç½®
â”‚   â”œâ”€â”€ AdvancedSettings.tsx    # é«˜çº§è®¾ç½®
â”‚   â””â”€â”€ DataManagement.tsx      # æ•°æ®ç®¡ç†
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ FormField.tsx           # è¡¨å•å­—æ®µç»„ä»¶
â”‚   â”œâ”€â”€ FormSection.tsx         # è¡¨å•åˆ†ç»„ç»„ä»¶
â”‚   â”œâ”€â”€ SliderWithInput.tsx     # æ»‘å—+è¾“å…¥æ¡†ç»„åˆ
â”‚   â”œâ”€â”€ UnsavedChangesBanner.tsx # æœªä¿å­˜æç¤ºæ¨ªå¹…
â”‚   â””â”€â”€ DangerZone.tsx          # å±é™©æ“ä½œåŒº
â””â”€â”€ hooks/
    â”œâ”€â”€ useSettings.ts          # è®¾ç½®çŠ¶æ€ç®¡ç†
    â”œâ”€â”€ useSettingsValidation.ts # è¡¨å•éªŒè¯
    â””â”€â”€ useUnsavedChanges.ts    # æœªä¿å­˜å˜æ›´æ£€æµ‹
```

---

## é…ç½® Schema

```typescript
interface SettingsConfig {
  // é€šç”¨è®¾ç½®
  general: {
    storage: 'localStorage' | 'indexedDB' | 'custom';
    customPath?: string;
    theme: 'light' | 'dark' | 'system';
    language: 'zh' | 'en' | 'ja';
  };

  // API é…ç½®
  api: {
    apiKey: string;
    apiEndpoint: string;
    envVars: {
      OPENAI_API_KEY: boolean;
      OPENAI_BASE_URL: boolean;
      OMNI_MODEL: boolean;
    };
  };

  // æ¨¡å‹é…ç½®
  model: {
    defaultModel: string;
    temperature: number;
    topP: number;
    maxTokens: number;
  };

  // é«˜çº§è®¾ç½®
  advanced: {
    timeout: number;
    retryCount: number;
    retryDelay: number;
    proxy: {
      enabled: boolean;
      type: 'http' | 'https' | 'socks5';
      host?: string;
      port?: number;
      username?: string;
      password?: string;
    };
  };
}
```
